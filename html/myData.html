<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- יצירת אלמנט div עם ה־id 'userData' -->
    <div id="userData"></div>
       <!-- יצירת אלמנט div עם ה־id 'leaderboard' -->
       <div id="leaderboard">
        <!-- טבלת המובילים תיווצר כאן -->
    </div>
    <script>
        let username  = localStorage.getItem("currentUser");
        showUserData();
        showLeaderboard();
        function showUserData() {
            var userData = JSON.parse(localStorage.getItem(username)) || {}; // מידע על המשתמש הנוכחי
            var plays = userData.plays || 'N/A';
            var lastPlayed = userData.lastPlayed || 'N/A';
            var highestScore = userData.highestScore || 'N/A';

            document.getElementById("userData").innerHTML = '<h2 style="color: black;">' + username + ' Data</h2>' +
                '<p>Plays: ' + plays + '</p>' +
                '<p>Last Played: ' + lastPlayed + '</p>' +
                '<p>Highest Score: ' + highestScore + '</p>';
        }
        function showLeaderboard() {
            // קבלת כל הנתונים מה local storage
            let allUserData;
            for (var i = 0; i < localStorage.length; i++) {
        allUserData.push({username: localStorage.getItem(username), highestScore: localStorage.getItem(highestScore) })
    }

            // מיון הנתונים לפי הניקוד הגבוה ביותר
            allUserData.sort(function(a, b) {
                return b.highestScore - a.highestScore;
            });

            // בניית טבלת המובילים
            var leaderboardTable = '<h2 style="color: black;">Leaderboard</h2><table style="border-collapse: collapse; width: 100%;"><tr><th style="border: 1px solid black; padding: 8px;">שם משתמש</th><th style="border: 1px solid black; padding: 8px;">הניקוד הכי גבוה</th></tr>';
            for (var i = 0; i < Math.min(5, allUserData.length); i++) {
                leaderboardTable += '<tr><td style="border: 1px solid black; padding: 8px;">' + allUserData[i].username + '</td><td style="border: 1px solid black; padding: 8px;">' + allUserData[i].highestScore + '</td></tr>';
            }
            leaderboardTable += '</table>';

            // הכנסת הטבלה לתוך האלמנט שיש לנו בדף
            document.getElementById('leaderboard').innerHTML = leaderboardTable;
        }
    </script>
</body>
</html>